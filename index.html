<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { display:flex; justify-content:center; align-items:center; height:100vh; background:#f0f2f5;}
.login-card{background:white; padding:2rem; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.15); width:100%; max-width:400px;}
.password-toggle{cursor:pointer;}
#usuario { text-transform: uppercase; }
</style>
</head>
<body>

<div class="login-card">
  <h3 class="text-center mb-4">Ingreso al Sistema</h3>
  <div id="alertMsg"></div>
  <div class="mb-3">
    <label for="usuario" class="form-label">Usuario</label>
    <input type="text" id="usuario" class="form-control" placeholder="USUARIO">
  </div>
  <div class="mb-3">
    <label for="contrase√±a" class="form-label">Contrase√±a</label>
    <div class="input-group">
      <input type="password" id="contrase√±a" class="form-control" placeholder="Contrase√±a">
      <span class="input-group-text password-toggle" id="togglePassword">üëÅÔ∏è</span>
    </div>
  </div>
  <div class="d-grid mb-2">
    <button class="btn btn-primary" onclick="login()">Ingresar</button>
  </div>
  <div class="text-center">
    <a href="#" onclick="recuperar()">¬øOlvidaste tu contrase√±a?</a>
  </div>
</div>

<script>
document.getElementById('togglePassword').addEventListener('click', () => {
  const passField = document.getElementById('contrase√±a');
  passField.type = passField.type === 'password' ? 'text' : 'password';
});

function showAlert(message, type='danger') {
  document.getElementById('alertMsg').innerHTML = `
    <div class="alert alert-${type} alert-dismissible fade show" role="alert">
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>`;
}

function login() {
  const usuario = document.getElementById('usuario').value.trim().toUpperCase();
  const contrase√±a = document.getElementById('contrase√±a').value;

  if(!usuario || !contrase√±a){
    showAlert('Ingresa usuario y contrase√±a'); 
    return;
  }

  // Leer usuarios desde localStorage (tabla de personal)
  let personal = JSON.parse(localStorage.getItem('personal')) || [];

  // Buscar usuario
  let user = personal.find(p => p.usuario === usuario);

  if(!user){
    showAlert('Usuario no registrado');
    return;
  }

  if(user.bloqueado){
    showAlert('Usuario bloqueado o inactivo, contacte al administrador');
    return;
  }

  if(user.contrasena !== contrase√±a){
    showAlert('Contrase√±a incorrecta');
    return;
  }

  // Guardar usuario logueado en localStorage
  localStorage.setItem('usuarioLogueado', usuario);

  // Login exitoso
  showAlert('Ingreso exitoso, redirigiendo...', 'success');
  setTimeout(() => {
    window.location.href = 'tecnologia.html';
  }, 1000);
}

function recuperar() {
  showAlert('Funci√≥n de recuperaci√≥n no implementada', 'info');
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
